<!doctype html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>TexurePacker+Phaser Demo!</title>
        <script src="js/phaser.min.js"></script>
    </head>
    <body>
        <input type="button" value="Move" onclick="movePlayer(cat, 50);"></input>
        <script>
            var capguy, cat;

			window.onload = function() {

			    var game = new Phaser.Game(800, 400, Phaser.AUTO, '', { preload: preload, create: create, update: update });

			    function preload () {
			        game.load.atlasJSONHash('cityscene', 'images/sprites/cityscene.png', 'images/sprites/cityscene.json');
			        game.load.atlasJSONHash('cat', 'images/sprites/running_cat.png', 'images/sprites/running_cat.json');
			    }

			    function create () {
			        var background = game.add.sprite(0, 0, 'cityscene', 'background');

			        capguy = game.add.sprite(0, 180, 'cityscene', 'capguy/walk/0001');
			        capguy.scale.setTo(0.5,0.5);

			        capguy.animations.add('walk', Phaser.Animation.generateFrameNames('capguy/walk/', 1, 8, '', 4), 10, true, false);
			        capguy.animations.play('walk');

			        cat = game.add.sprite(0, 250, 'cat', 'cat/walk/0001');
			        cat.scale.setTo(0.5,0.5);

			        cat.animations.add('walk', Phaser.Animation.generateFrameNames('cat/walk/', 0, 7, '', 4), 10, true, false);
			        cat.animations.play('walk');

                var style = { font : "14px Arial",
                    fill: "#3399FF",
                    align: "center"
                };
                text = game.add.text(game.world.centerX, game.world.centerY-20, "10 pt(s)", style);
                text.anchor.set(0.5);
			    }

			    function update() {
                    //cat.animations.stop('walk', 0);

			        capguy.x += 3;
			        if(capguy.x > 800)
			        {
			            capguy.x = -50;
			        }

			        cat.x += 3;
			        if(cat.x > 800)
			        {
			            cat.x = -50;
			        }

			    }

			};

            movePlayer = function(player, x) {
                cat.animations.play('walk');
                player.x += x;
                //cat.animations.stop('walk', 1);

            };
        </script>

    </body>
</html>